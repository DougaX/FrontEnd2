# ğŸ“š Atividade 05 - Context API + Rotas Protegidas

Esta atividade contÃ©m **2 projetos** implementados com **Context API**, **useRef** e **Rotas Protegidas**.

---


## ğŸ“ Estrutura da Atividade

- atividade05/
- â”œâ”€â”€ todolist-context/ # Projeto 1: TodoList com Context API
- â””â”€â”€ sistema-salas-context/ # Projeto 2: Sistema Escolar refatorado

---

---

# ğŸ¯ PROJETO 1: TodoList com Context API + useRef

Sistema completo de gerenciamento de tarefas usando **Context API** para evitar **props drilling**.

## ğŸš€ Tecnologias

- React 18
- Context API
- useRef (otimizaÃ§Ã£o de performance)
- localStorage (persistÃªncia)
- Vite

## âœ¨ Funcionalidades

- âœ… Criar tarefas com tÃ­tulo e descriÃ§Ã£o
- âœ… Adicionar mÃºltiplos passos por tarefa
- âœ… Marcar passos como concluÃ­dos
- âœ… Remover tarefas e passos
- âœ… Barra de progresso visual
- âœ… Tarefas completas mudam de cor
- âœ… Salvar automaticamente no localStorage
- âœ… **Zero props drilling** (Context API)
- âœ… **useRef** para inputs (sem re-renders)

## ğŸ¨ Destaques TÃ©cnicos

### Context API
```jsx
// TaskContext.jsx
export const TaskProvider = ({ children }) => {
  const [tasks, setTasks] = useState([]);
  // ... lÃ³gica centralizada
  
  return (
    <TaskContext.Provider value={value}>
      {children}
    </TaskContext.Provider>
  );
};

// Hook customizado
export const useTasks = () => {
  const context = useContext(TaskContext);
  return context;
};
```
- useRef para Performance

## ğŸ“¦ Como executar

- cd todolist-context
- npm install
- npm run dev

# ğŸ« PROJETO 2: Sistema Escolar com Context API
Sistema de gerenciamento de salas escolares refatorado com Context API e Rotas Protegidas.

## ğŸš€ Tecnologias

- React 18
- React Router DOM 6
- Context API (3 contextos)
- Protected Routes
- localStorage (autenticaÃ§Ã£o simulada)
- Vite

## âœ¨ Funcionalidades

- âœ… Login e Registro com autenticaÃ§Ã£o
- âœ… Rotas protegidas (somente usuÃ¡rios autenticados)
- âœ… Dashboard com listagem de salas
- âœ… Filtros por tipo e disponibilidade
 âœ… Detalhes da sala com reserva
 âœ… Sistema de reservas completo
 âœ… Gerenciamento de minhas reservas
 âœ… Zero props drilling em todo o app
 âœ… 3 Contextos (Auth, Sala, Reserva)

## ğŸ¨ Arquitetura de Contextos

1ï¸âƒ£ AuthContext

- Gerencia autenticaÃ§Ã£o e usuÃ¡rio logado.

```jsx
const { user, login, logout, isAuthenticated } = useAuth();

```

- Funcionalidades:

 Login/Logout
 Verificar autenticaÃ§Ã£o
 Gerenciar dados do usuÃ¡rio
 PersistÃªncia no localStorage

2ï¸âƒ£ SalaContext
Gerencia lista de salas, filtros e estatÃ­sticas.

```jsx
const { 
  salas, 
  salasFiltradas, 
  filtro, 
  setFiltro,
  getSalaById,
  totalSalas,
  salasDisponiveis,
  salasOcupadas
} = useSalas();

```
- Funcionalidades:

Lista de salas
Filtros dinÃ¢micos
EstatÃ­sticas automÃ¡ticas
Buscar sala por ID

3ï¸âƒ£ ReservaContext
Gerencia reservas de salas.

```jsx
const { 
  reservas, 
  addReserva, 
  cancelReserva,
  totalReservas,
  reservasConfirmadas,
  reservasPendentes
} = useReservas();
```
- Funcionalidades:

Criar reserva
Cancelar reserva
EstatÃ­sticas de reservas
PersistÃªncia no localStorage

## ğŸ” Rotas Protegidas

- MainLayout (Protegido)

```jsx
const MainLayout = () => {
  const { isAuthenticated, loading } = useAuth();

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  return (
    <>
      <Header />
      <Outlet />
      <Footer />
    </>
  );
};
```
- AuthLayout (Redireciona se autenticado)

```jsx
const AuthLayout = () => {
  const { isAuthenticated } = useAuth();

  if (isAuthenticated) {
    return <Navigate to="/dashboard" replace />;
  }

  return <Outlet />;
};
```

## ğŸ“ Estrutura de Pastas
```bash

text
sistema-salas-context/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.jsx          (usa useAuth)
â”‚   â”‚   â”œâ”€â”€ Footer.jsx
â”‚   â”‚   â”œâ”€â”€ SalaCard.jsx
â”‚   â”‚   â””â”€â”€ ReservaCard.jsx
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”œâ”€â”€ AuthContext.jsx     (autenticaÃ§Ã£o)
â”‚   â”‚   â”œâ”€â”€ SalaContext.jsx     (salas)
â”‚   â”‚   â””â”€â”€ ReservaContext.jsx  (reservas)
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ MainLayout.jsx      (rotas protegidas)
â”‚   â”‚   â””â”€â”€ AuthLayout.jsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Login.jsx           (usa useAuth)
â”‚   â”‚   â”œâ”€â”€ Register.jsx        (usa useAuth)
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx       (usa useSalas)
â”‚   â”‚   â”œâ”€â”€ SalaDetalhes.jsx    (usa 3 contextos)
â”‚   â”‚   â””â”€â”€ Reservas.jsx        (usa useReservas)
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ salas.json
â”‚   â”‚   â””â”€â”€ reservas.json
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ ... (CSS files)
â”‚   â”œâ”€â”€ App.jsx                 (3 Providers)
â”‚   â””â”€â”€ main.jsx
ğŸ”— App.jsx com Providers
```
```jsx
function App() {
  return (
    <Router>
      <AuthProvider>
        <SalaProvider>
          <ReservaProvider>
            <Routes>
              {/* Rotas aqui */}
            </Routes>
          </ReservaProvider>
        </SalaProvider>
      </AuthProvider>
    </Router>
  );
}
```
## ğŸ“¦ Como executar

- cd sistema-salas-context
- npm install
- npm run dev
- Acesse: http://localhost:5173/

## ğŸ”‘ Login

- Email: qualquer email vÃ¡lido
- Senha: qualquer senha (mÃ­nimo 6 caracteres)
- Sistema simula autenticaÃ§Ã£o via localStorage

## ğŸ¯ Fluxo de NavegaÃ§Ã£o

```bash
/ â†’ Redireciona para /login
/login â†’ PÃ¡gina de login
/register â†’ PÃ¡gina de registro
/dashboard ğŸ”’ â†’ Lista de salas (protegido)
/sala/:id ğŸ”’ â†’ Detalhes da sala (protegido)
/reservas ğŸ”’ â†’ Minhas reservas (protegido)
ğŸ”’ = Rota Protegida (requer autenticaÃ§Ã£o)
```

## ğŸ“Š ComparaÃ§Ã£o: Antes vs Depois

âŒ Antes (Props Drilling)

```jsx

// App passa props para todos componentes
<Dashboard 
  salas={salas} 
  onFilter={handleFilter}
  user={user}
/>

// Dashboard passa para SalaCard
<SalaCard 
  sala={sala} 
  user={user}
  onReservar={onReservar}
/>
```
âœ… Depois (Context API)

```jsx
// Componente usa diretamente o contexto
function Dashboard() {
  const { salasFiltradas } = useSalas();
  const { user } = useAuth();
  
  return <SalaCard sala={sala} />;
}
```

## ğŸ“ Conceitos Aplicados

Context API

- âœ… Evita props drilling
- âœ… Estado global centralizado
- âœ… Hooks customizados
- âœ… Providers aninhados

useRef

- âœ… ReferÃªncias a elementos DOM
- âœ… Valores mutÃ¡veis sem re-render
- âœ… Controle de primeiro render
- âœ… OtimizaÃ§Ã£o de performance

React Router

- âœ… Rotas aninhadas
- âœ… Protected Routes
- âœ… Navigate component
- âœ… useNavigate hook 
- âœ… useParams hook

localStorage

- âœ… PersistÃªncia de dados
- âœ… AutenticaÃ§Ã£o simulada
- âœ… Salvamento automÃ¡tico
- âœ… Carregamento inicial

